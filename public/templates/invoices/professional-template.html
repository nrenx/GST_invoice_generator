<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tax Invoice - {{INVOICE_NUMBER}}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    @page {
      size: A4;
      margin: 0;
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 11px;
      line-height: 1.2;
      color: #000;
      background: #fff;
    }

    .page {
      width: 210mm;
      min-height: 297mm;
      padding: 6mm;
      margin: 0 auto;
      background: #fff;
      position: relative;
      border: 2px solid #000;
    }

    .header-bar {
      background: #1f4f88;
      color: #fff;
      text-align: center;
      padding: 4px 0;
      font-size: 12px;
      font-weight: bold;
      letter-spacing: 1px;
      border: 2px solid #000;
      border-bottom: none;
      text-transform: uppercase;
    }

    .company-header {
      background: #1f4f88;
      color: #fff;
      text-align: center;
      padding: 12px 0 10px;
      border: 2px solid #000;
      border-top: none;
      border-bottom: 2px solid #000;
    }

    .company-name {
      font-size: 32px;
      font-weight: 700;
      letter-spacing: 3px;
      margin-bottom: 4px;
    }

    .company-details {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      background: white;
      border: 2px solid #000;
      border-top: none;
      padding: 10px 12px;
      min-height: 70px;
    }

    .company-info {
      text-align: left;
      flex: 1;
    }

    .company-info div {
      margin: 4px 0;
      font-size: 16px;
    }

    .company-details .detail-label {
      font-weight: 600;
    }

    .company-details .detail-value {
      font-weight: 700;
    }

    .company-qr {
      min-width: 90px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .company-qr img {
      width: 90px;
      height: 90px;
      border: 1px solid #000;
      padding: 4px;
      background: #fff;
    }

    .invoice-title-section {
      display: table;
      width: 100%;
      border: 2px solid #000;
      border-top: none;
      background: #f5f5f5;
    }

    .invoice-title-left {
      display: table-cell;
      width: 60%;
      padding: 8px 10px;
      font-size: 20px;
      font-weight: bold;
      border-right: 2px solid #000;
      letter-spacing: 1px;
      text-align: center;
      vertical-align: middle;
    }

    .invoice-title-right {
      display: table-cell;
      width: 40%;
      padding: 4px 8px;
      font-size: 9px;
      text-align: center;
      line-height: 1.3;
      vertical-align: middle;
    }

    .invoice-title-right div {
      margin: 1px 0;
    }

    .metadata-table {
      width: 100%;
      border: 2px solid #000;
      border-top: none;
      border-collapse: collapse;
      table-layout: fixed;
      font-size: 10px;
    }

    .metadata-table td {
      border: 1px solid #000;
      padding: 5px 8px;
      vertical-align: middle;
      white-space: normal;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .metadata-label-cell {
      font-weight: bold;
      width: 12%;
    }

    .metadata-value-cell {
      width: 13%;
      padding-left: 6px;
    }

    .metadata-highlight {
      color: #d32f2f;
      font-weight: bold;
    }

    .red-text {
      color: #d32f2f;
      font-weight: bold;
    }

    .party-table {
      width: 100%;
      border: 2px solid #000;
      border-top: none;
      border-collapse: collapse;
      table-layout: fixed;
    }

    .party-table th {
      background: #f5f5f5;
      font-weight: bold;
      text-align: center;
      padding: 6px;
      border: 1px solid #000;
      font-size: 11px;
    }

    .party-table th + th {
      border-left-width: 2px;
    }

    .party-table td {
      border: 1px solid #000;
      vertical-align: top;
      padding: 0;
    }

    .party-table td + td {
      border-left-width: 2px;
    }

    .party-info-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 10px;
    }

    .party-info-table th,
    .party-info-table td {
      border-bottom: 1px solid #000;
      padding: 4px 6px;
      text-align: left;
      white-space: normal;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .party-info-table th {
      width: 38%;
      font-weight: bold;
      border-right: 1px solid #000;
    }

    .party-info-table td {
      border-right: none;
    }

    .party-info-table tr:last-child th,
    .party-info-table tr:last-child td {
      border-bottom: none;
    }

    .items-table {
      width: 100%;
      border-collapse: collapse;
      border: 2px solid #000;
      border-top: none;
      font-size: 9px;
      table-layout: fixed;
    }

    .items-table th {
      background: #f5f5f5;
      border: 1px solid #000;
      padding: 4px 3px;
      font-weight: bold;
      text-align: center;
      font-size: 9px;
      white-space: nowrap;
    }

    .items-table td {
      border: 1px solid #000;
      padding: 4px 3px;
      text-align: left;
      white-space: normal;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .items-table .text-right {
      text-align: right;
    }

    .items-table .text-center {
      text-align: center;
    }

    .blank-item-row td {
      height: 20px;
    }

    .tax-header-group {
      background: #fff;
      text-align: center;
    }

    .red-header {
      color: #d32f2f;
      font-weight: bold;
    }

    .total-row {
      background: #e5e5e5;
      font-weight: bold;
    }

    .yellow-highlight {
      background: #ffea2d;
      font-weight: bold;
      padding: 6px 8px;
      text-transform: uppercase;
    }

    .summary-table {
      width: 100%;
      border: 2px solid #000;
      border-top: none;
      border-collapse: collapse;
      table-layout: fixed;
    }

    .summary-table td {
      border: 1px solid #000;
      vertical-align: top;
      padding: 0;
    }

    .summary-left-cell {
      width: 60%;
      border-right: 2px solid #000;
    }

    .summary-right-cell {
      width: 40%;
    }

    .amount-words-section {
      background: #ffea2d;
      font-weight: bold;
      padding: 6px 8px;
      border-bottom: 2px solid #000;
      font-size: 11px;
      text-transform: uppercase;
      text-align: center;
    }

    .amount-words-value {
      padding: 6px 8px;
      border-bottom: 2px solid #000;
      min-height: 30px;
      font-size: 11px;
    }

    .terms-section {
      background: #ffea2d;
      font-weight: bold;
      padding: 6px 8px;
      border-bottom: 2px solid #000;
      font-size: 11px;
      text-transform: uppercase;
      text-align: center;
    }

    .terms-content {
      padding: 6px 8px 8px;
      font-size: 9px;
      line-height: 1.35;
      min-height: 80px;
      white-space: pre-line;
    }

    .terms-content ol {
      margin-left: 18px;
      margin-top: 4px;
    }

    .terms-content li {
      margin: 2px 0;
    }

    .tax-summary-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 10px;
    }

    .tax-summary-table td {
      border-bottom: 1px solid #000;
      padding: 6px 8px;
      white-space: normal;
      word-break: break-word;
      overflow-wrap: anywhere;
    }

    .tax-summary-table td:first-child {
      font-weight: bold;
      border-right: 1px solid #000;
    }

    .tax-summary-table td:last-child {
      text-align: right;
      width: 40%;
    }

    .tax-summary-table tr:last-child td {
      border-bottom: none;
    }

    .tax-summary-table .grand-total-row td {
      background: #ffea2d;
      font-weight: bold;
      font-size: 11px;
    }

    .certification-text {
      padding: 8px;
      border-top: 2px solid #000;
      border-bottom: 2px solid #000;
      text-align: center;
      font-size: 10px;
      font-weight: bold;
    }

    .signature-table {
      width: 100%;
      border: 2px solid #000;
      border-top: none;
      border-collapse: collapse;
      table-layout: fixed;
    }

    .signature-table td {
      border: 1px solid #000;
      padding: 8px;
      vertical-align: top;
    }

    .signature-table td + td {
      border-left-width: 2px;
    }

    .signature-block {
      display: flex;
      flex-direction: column;
      min-height: 95px;
    }

    .signature-label {
      font-size: 9px;
      margin-bottom: 4px;
      text-align: left;
    }

    .signature-space {
      flex: 1;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      margin-bottom: 6px;
    }

    .signature-footer {
      text-align: center;
      font-weight: bold;
      padding-top: 6px;
      border-top: 1px solid #000;
      font-size: 10px;
    }

    @media print {
      body {
        margin: 0;
        padding: 0;
      }
      .page {
        margin: 0;
        padding: 10mm;
        page-break-after: always;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Header Bar -->
    <div class="header-bar">{{PAGE_TYPE}}</div>

    <!-- Company Header -->
    <div class="company-header">
      <div class="company-name">{{COMPANY_NAME}}</div>
    </div>

    <!-- Company Details -->
    <div class="company-details">
      <div class="company-info">
        <div><span class="detail-value">{{COMPANY_ADDRESS}}</span></div>
        <div><span class="detail-label">GSTIN:</span> <span class="detail-value">{{COMPANY_GSTIN}}</span></div>
        {{COMPANY_CONTACT_INFO}}
      </div>
      <div class="company-qr">
        <img alt="Invoice QR"
          src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=Invoice%20No.%3A%20{{INVOICE_NUMBER}}%0AInvoice%20Date%3A%20{{INVOICE_DATE}}%0AName%3A%20{{RECEIVER_NAME}}%0AGSTIN%3A%20{{RECEIVER_GSTIN}}%0AState%3A%20{{RECEIVER_STATE}}%0ASale%20Type%3A%20{{SALE_TYPE}}%0AE-Way%20Bill%20No.%3A%20{{EWAY_BILL_NUMBER}}%0AQuantity%3A%20{{TOTAL_QUANTITY}}%0ATotal%20Amount%20After%20Tax%3A%20{{GRAND_TOTAL}}" />
      </div>
    </div>

    <!-- Invoice Title Section -->
    <div class="invoice-title-section">
      <div class="invoice-title-left">TAX-INVOICE</div>
      <div class="invoice-title-right">
        <div>Original for Recipient</div>
        <div>Duplicate for Supplier/Transporter</div>
        <div>Triplicate for Supplier</div>
      </div>
    </div>

    <!-- Metadata Grid -->
    <table class="metadata-table">
      <tbody>
        <tr>
          <td class="metadata-label-cell">Invoice No.</td>
          <td class="metadata-value-cell metadata-highlight">{{INVOICE_NUMBER}}</td>
          <td class="metadata-label-cell">Transport Mode</td>
          <td class="metadata-value-cell">{{TRANSPORT_MODE}}</td>
          <td class="metadata-label-cell">Challan No.</td>
          <td class="metadata-value-cell">{{CHALLAN_NUMBER}}</td>
          <td class="metadata-label-cell">Sale Type</td>
          <td class="metadata-value-cell"><span class="red-text">{{SALE_TYPE}}</span></td>
        </tr>
        <tr>
          <td class="metadata-label-cell">Invoice Date</td>
          <td class="metadata-value-cell">{{INVOICE_DATE}}</td>
          <td class="metadata-label-cell">Vehicle Number</td>
          <td class="metadata-value-cell">{{VEHICLE_NUMBER}}</td>
          <td class="metadata-label-cell">Transporter Name</td>
          <td class="metadata-value-cell">{{TRANSPORTER_NAME}}</td>
          <td class="metadata-label-cell">Invoice Type</td>
          <td class="metadata-value-cell">{{INVOICE_TYPE}}</td>
        </tr>
        <tr>
          <td class="metadata-label-cell">State</td>
          <td class="metadata-value-cell">{{COMPANY_STATE}}</td>
          <td class="metadata-label-cell">Date of Supply</td>
          <td class="metadata-value-cell">{{DATE_OF_SUPPLY}}</td>
          <td class="metadata-label-cell">L.R Number</td>
          <td class="metadata-value-cell">{{LR_NUMBER}}</td>
          <td class="metadata-label-cell">Reverse Charge</td>
          <td class="metadata-value-cell">{{REVERSE_CHARGE}}</td>
        </tr>
        <tr>
          <td class="metadata-label-cell">State Code</td>
          <td class="metadata-value-cell">{{COMPANY_STATE_CODE}}</td>
          <td class="metadata-label-cell">Place of Supply</td>
          <td class="metadata-value-cell">{{PLACE_OF_SUPPLY}}</td>
          <td class="metadata-label-cell">P.O Number</td>
          <td class="metadata-value-cell">{{PO_NUMBER}}</td>
          <td class="metadata-label-cell">E-Way Bill No.</td>
          <td class="metadata-value-cell">{{EWAY_BILL_NUMBER}}</td>
        </tr>
      </tbody>
    </table>

    <!-- Party Details Section -->
    <table class="party-table">
      <thead>
        <tr>
          <th>Details of Receiver (Billed to)</th>
          <th>Details of Consignee (Shipped to)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <table class="party-info-table">
              <tbody>
                <tr>
                  <th>Name:</th>
                  <td>{{RECEIVER_NAME}}</td>
                </tr>
                <tr>
                  <th>Address:</th>
                  <td>{{RECEIVER_ADDRESS}}</td>
                </tr>
                <tr>
                  <th>GSTIN:</th>
                  <td>{{RECEIVER_GSTIN}}</td>
                </tr>
                <tr>
                  <th>State:</th>
                  <td>{{RECEIVER_STATE}}</td>
                </tr>
                <tr>
                  <th>State Code:</th>
                  <td>{{RECEIVER_STATE_CODE}}</td>
                </tr>
              </tbody>
            </table>
          </td>
          <td>
            <table class="party-info-table">
              <tbody>
                <tr>
                  <th>Name:</th>
                  <td>{{CONSIGNEE_NAME}}</td>
                </tr>
                <tr>
                  <th>Address:</th>
                  <td>{{CONSIGNEE_ADDRESS}}</td>
                </tr>
                <tr>
                  <th>GSTIN:</th>
                  <td>{{CONSIGNEE_GSTIN}}</td>
                </tr>
                <tr>
                  <th>State:</th>
                  <td>{{CONSIGNEE_STATE}}</td>
                </tr>
                <tr>
                  <th>State Code:</th>
                  <td>{{CONSIGNEE_STATE_CODE}}</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Items Table -->
    <table class="items-table">
      <thead>
        <tr>
          <th rowspan="2" style="width: 3%;">Sr.<br>No.</th>
          <th rowspan="2" style="width: 18%;">Description</th>
          <th rowspan="2" style="width: 6%;">HSN/SAC<br>Code</th>
          <th rowspan="2" style="width: 6%;">Quantity</th>
          <th rowspan="2" style="width: 4%;">UOM</th>
          <th rowspan="2" style="width: 7%;">Rate</th>
          <th rowspan="2" style="width: 8%;">Amount</th>
          <th rowspan="2" style="width: 8%;">Taxable<br>Value</th>
          <th colspan="2" class="{{CGST_HEADER_CLASS}}">{{CGST_HEADER_LABEL}}</th>
          <th colspan="2" class="{{SGST_HEADER_CLASS}}">{{SGST_HEADER_LABEL}}</th>
          <th colspan="2" class="{{IGST_HEADER_CLASS}}">{{IGST_HEADER_LABEL}}</th>
          <th rowspan="2" style="width: 8%;">Total<br>Amount</th>
        </tr>
        <tr>
          <th style="width: 4%;">Rate<br>(%)</th>
          <th style="width: 5%;">Amount<br>(Rs.)</th>
          <th style="width: 4%;">Rate<br>(%)</th>
          <th style="width: 5%;">Amount<br>(Rs.)</th>
          <th style="width: 4%;">Rate<br>(%)</th>
          <th style="width: 5%;">Amount<br>(Rs.)</th>
        </tr>
      </thead>
      <tbody>
        {{ITEMS_ROWS}}
        <tr class="total-row">
          <td colspan="3" class="text-center"><strong style="font-size: 12px;">Total</strong></td>
          <td class="text-right"><strong>{{TOTAL_QUANTITY}}</strong></td>
          <td></td>
          <td class="text-right"><strong>Sub Total:</strong></td>
          <td class="text-right"><strong>{{TOTAL_AMOUNT}}</strong></td>
          <td class="text-right"><strong>{{TOTAL_TAXABLE_VALUE}}</strong></td>
          <td class="text-right"><strong>{{TOTAL_CGST_RATE}}</strong></td>
          <td class="text-right"><strong>{{TOTAL_CGST}}</strong></td>
          <td class="text-right"><strong>{{TOTAL_SGST_RATE}}</strong></td>
          <td class="text-right"><strong>{{TOTAL_SGST}}</strong></td>
          <td class="text-right"><strong>{{TOTAL_IGST_RATE}}</strong></td>
          <td class="text-right"><strong>{{TOTAL_IGST}}</strong></td>
          <td class="text-right"><strong>{{GRAND_TOTAL}}</strong></td>
        </tr>
      </tbody>
    </table>

    <!-- Summary Section -->
    <table class="summary-table">
      <tbody>
        <tr>
          <td class="summary-left-cell">
            <div class="amount-words-section">Total Invoice Amount in Words</div>
            <div class="amount-words-value">{{AMOUNT_IN_WORDS}}</div>
            <div class="terms-section">Terms and Conditions</div>
            <div class="terms-content">
              {{TERMS_AND_CONDITIONS}}
            </div>
          </td>
          <td class="summary-right-cell">
            <table class="tax-summary-table">
              <tbody>
                <tr>
                  <td>Total Amount Before Tax:</td>
                  <td>{{TOTAL_TAXABLE_VALUE}}</td>
                </tr>
                <tr>
                  <td>CGST :</td>
                  <td>{{TOTAL_CGST}}</td>
                </tr>
                <tr>
                  <td>SGST :</td>
                  <td>{{TOTAL_SGST}}</td>
                </tr>
                <tr>
                  <td>IGST :</td>
                  <td>{{TOTAL_IGST}}</td>
                </tr>
                <tr>
                  <td>CESS :</td>
                  <td>0.00</td>
                </tr>
                <tr>
                  <td>Total Tax:</td>
                  <td>{{TOTAL_TAX}}</td>
                </tr>
                <tr class="grand-total-row">
                  <td>Total Amount After Tax:</td>
                  <td>{{GRAND_TOTAL}}</td>
                </tr>
              </tbody>
            </table>
            <div class="certification-text">
              Certified that the particulars given above are true and correct
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Signature Section -->
    <table class="signature-table">
      <tbody>
        <tr>
          <td>
            <div class="signature-block">
              <div class="signature-label">Mobile No: _____________</div>
              <div class="signature-space"></div>
              <div class="signature-footer">Transporter's Signature</div>
            </div>
          </td>
          <td>
            <div class="signature-block">
              <div class="signature-label">Mobile No: _____________</div>
              <div class="signature-space"></div>
              <div class="signature-footer">Receiver's Signature</div>
            </div>
          </td>
          <td>
            <div class="signature-block">
              <div class="signature-label">Mobile No: _____________</div>
              <div class="signature-space"></div>
              <div class="signature-footer">Authorized Signatory</div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
</html>
